\mode<presentation>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Headline with sectioning
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setbeamertemplate{headline}{%
  \ifnum \theframenumber=1 % This is the title frame, do nothing
  \else
  \leavevmode
  \hbox{
    \begin{beamercolorbox}[wd = \paperwidth, ht = 3.4ex, dp = 1.5ex]{palette}%
      \insertsectionnavigationhorizontal{\paperwidth}{}{\hskip0pt plus1filll}
    \end{beamercolorbox}
  }
  \fi
}

\setbeamertemplate{section in head/foot}{%
  \tikz[baseline=2.5pt]{
    \node(s)[above, text = maincolor]{\bf\insertsectionhead}; 

    \draw[maincolor, line width = 2pt]
    ([yshift=-1pt, xshift=-4.5pt]s.south west)--([yshift=-1pt, xshift=4.5pt]s.south east);

    \draw[black!5!backgroundcolor, line width = .5pt] ([xshift=-4.5pt, yshift=2pt]s.north west) -- ([xshift=-4.5pt, yshift=-3pt]s.south west);
    \draw[black!4!backgroundcolor, line width = .5pt] ([xshift=-5pt, yshift=2pt]s.north west) -- ([xshift=-5pt, yshift=-3pt]s.south west);
    \draw[black!3!backgroundcolor, line width = .5pt] ([xshift=-5.5pt, yshift=2pt]s.north west) -- ([xshift=-5.5pt, yshift=-3pt]s.south west);
    \draw[black!2!backgroundcolor, line width = .5pt] ([xshift=-6pt, yshift=2pt]s.north west) -- ([xshift=-6pt, yshift=-3pt]s.south west);
    \draw[black!1!backgroundcolor, line width = .5pt] ([xshift=-6.5pt, yshift=2pt]s.north west) -- ([xshift=-6.5pt, yshift=-3pt]s.south west);

    \draw[black!5!backgroundcolor, line width = .5pt] ([xshift=4.5pt, yshift=2pt]s.north east) -- ([xshift=4.5pt, yshift=-3pt]s.south east);
    \draw[black!4!backgroundcolor, line width = .5pt] ([xshift=5pt, yshift=2pt]s.north east) -- ([xshift=5pt, yshift=-3pt]s.south east);
    \draw[black!3!backgroundcolor, line width = .5pt] ([xshift=5.5pt, yshift=2pt]s.north east) -- ([xshift=5.5pt, yshift=-3pt]s.south east);
    \draw[black!2!backgroundcolor, line width = .5pt] ([xshift=6pt, yshift=2pt]s.north east) -- ([xshift=6pt, yshift=-3pt]s.south east);
    \draw[black!1!backgroundcolor, line width = .5pt] ([xshift=6.5pt, yshift=2pt]s.north east) -- ([xshift=6.5pt, yshift=-3pt]s.south east);

  }
}

\setbeamertemplate{section in head/foot shaded}{%
  \tikz[baseline=(s.base) + 1pt]{
    \node(s)[text = textcolor!60!backgroundcolor]{\insertsectionhead};
  }
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Foot line
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\setbeamertemplate{footline}{
  \nointerlineskip% 
  \ifnum\theframenumber=1 % This is the title frame, do nothing
  \else
      \begin{tikzpicture}
        \node[fill = maincolor!90, text = backgroundcolor, minimum width = .25\paperwidth, minimum height = .4cm, inner sep=0,outer sep=0] (left) {\scriptsize \bf \insertshortauthor};

        \node[fill = maincolor, text = backgroundcolor, minimum width = .5\paperwidth, minimum height = .4cm, right = 0em of left, inner sep=0,outer sep=0] (center) {\scriptsize \bf \insertshorttitle};

        \node[fill = maincolor!90, text = backgroundcolor, minimum width = .25\paperwidth, minimum height = .4cm, right = 0em of center, inner sep=0,outer sep=0] (right) {\scriptsize \bf \insertshortdate \hspace*{2em} \insertframenumber{} / \inserttotalframenumber};
        
        \node[minimum height = .5cm, above = 0em of center] (top) {};
      \end{tikzpicture}
  \fi
}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% background
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setbeamertemplate{background}{
  \begin{tikzpicture}
    \useasboundingbox (0, 0) rectangle(\the\paperwidth,\the\paperheight);  
    \fill[backgroundcolor, opacity = 1]
    (0, 0) rectangle(\the\paperwidth,\the\paperheight + 5cm);
  \end{tikzpicture}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Frame title
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\defbeamertemplate*{frametitle}{bitterchocline}[1][]{%
  \begin{beamercolorbox}[wd=\paperwidth, ht=1cm]{frametitle} 
    \begin{tikzpicture}
      \useasboundingbox (0, -1pt) rectangle(\the\paperwidth,\the\paperheight);

      \fill [draw,
        line width = 1pt,
        top color = black!10!backgroundcolor, % !30!white,
        middle color = backgroundcolor,
        bottom color = backgroundcolor,
      ] (0, -4pt) rectangle(\the\paperwidth, 0.5pt);
      
      \fill [color = maincolor] (0, 0pt) rectangle(\the\paperwidth, 1cm);
      
      \usebeamercolor{footline}
      \node[right] at (0.3, 0.5cm){
        \color{frametitle.fg}
        \insertframetitle
      };
    \end{tikzpicture}
  \end{beamercolorbox}
}

\setlength{\footnotesep}{8pt}   % space between footnotes
\setlength{\skip\footins}{5pt}  % space between body text and footnoes

\setbeamertemplate{footnote}{%
  \raggedright
      {
        \linespread{0.0}
        \usebeamercolor[fg]{footnote}%
        \usebeamerfont{footnote}%
        \insertfootnotetext
      }
}

\setbeamertemplate{navigation symbols}{}

\mode<all>
